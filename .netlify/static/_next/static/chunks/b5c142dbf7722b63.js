(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},65940,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),s=e.i(71645),r=e.i(18566);function l(){let e=(0,r.useParams)(),l=(0,r.useRouter)(),a=e.sessionId,[c,n]=(0,s.useState)(null),[i,o]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/get-results"),t=await e.json();if(t.success){let e=t.results.find(e=>e.sessionId===a);if(e){n(e),o(!1);return}}let s=localStorage.getItem("test_completed_".concat(a)),r=localStorage.getItem("student_".concat(a)),l=localStorage.getItem("pattern_reasoning_test_".concat(a));if(!s||!l){n(null),o(!1);return}let c=JSON.parse(s),i=r?JSON.parse(r):null,d=JSON.parse(l),x=d.filter(e=>e.isCorrect).length,m=d.length,g=m>0?Math.round(x/m*100):0;n({sessionId:a,name:(null==i?void 0:i.firstName)||c.studentName||"Unknown",completedAt:c.completedAt||c.timestamp,totalQuestions:m,correctAnswers:x,score:c.score||g,results:d,isFiltered:c.isFiltered||!1,filterType:c.filterType||"all"})}catch(e){console.error("Error loading individual result:",e);try{let e=localStorage.getItem("test_completed_".concat(a)),t=localStorage.getItem("student_".concat(a)),s=localStorage.getItem("pattern_reasoning_test_".concat(a));if(!e||!s){n(null),o(!1);return}let r=JSON.parse(e),l=t?JSON.parse(t):null,c=JSON.parse(s),i=c.filter(e=>e.isCorrect).length,d=c.length,x=d>0?Math.round(i/d*100):0;n({sessionId:a,name:(null==l?void 0:l.firstName)||r.studentName||"Unknown",completedAt:r.completedAt||r.timestamp,totalQuestions:d,correctAnswers:i,score:r.score||x,results:c,isFiltered:r.isFiltered||!1,filterType:r.filterType||"all"})}catch(e){console.error("Error loading from localStorage:",e),n(null)}}finally{o(!1)}})()},[a]),i)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-900 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading results..."})]})}):c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[c.name,"'s Results"]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Session: ",c.sessionId]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Completed: ",new Date(c.completedAt).toLocaleString()]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(c.isFiltered?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:c.isFiltered?"Ages 12+ Test":"Full Test"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:c.totalQuestions}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c.correctAnswers}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Correct"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold ".concat(c.score>=80?"text-green-600":c.score>=60?"text-yellow-600":"text-red-600"),children:[c.score,"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Score"})]})]}),(0,t.jsx)("button",{onClick:()=>l.push("/results"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"← Back to All Results"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Question-by-Question Results"}),(0,t.jsx)("div",{className:"space-y-3",children:c.results.map((e,s)=>{var r;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 ".concat(e.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold ".concat(e.isCorrect?"bg-green-500":"bg-red-500"),children:e.isCorrect?"✓":"✗"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-semibold text-gray-900",children:["Question ",e.questionId]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Age Group: ",e.ageGroup||"Unknown"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Your Answer: ",(0,t.jsx)("span",{className:"font-semibold",children:(null==(r=e.answer)?void 0:r.answer)||"No Answer"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Correct Answer: ",(0,t.jsx)("span",{className:"font-semibold",children:e.correctAnswer})]})]})]},s)})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Performance by Age Group"}),(()=>{let e={};return c.results.forEach(t=>{let s=t.ageGroup||"Unknown";e[s]||(e[s]={total:0,correct:0}),e[s].total+=1,t.isCorrect&&(e[s].correct+=1)}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(e).map(e=>{let[s,r]=e,l=r.total>0?Math.round(r.correct/r.total*100):0;return(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:s}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[r.correct," of ",r.total," questions"]}),(0,t.jsxs)("div",{className:"text-2xl font-bold ".concat(l>=80?"text-green-600":l>=60?"text-yellow-600":"text-red-600"),children:[l,"%"]})]},s)})})})()]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Results Not Found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"The results for this session could not be found."}),(0,t.jsx)("button",{onClick:()=>l.push("/results"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Results"})]})})}}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},59998,e=>{"use strict";e.s(["default",()=>a,"dynamic",()=>r]);var t=e.i(43476),s=e.i(18566),l=e.i(71645);let r="force-dynamic",n=[{id:1,word:"cat",difficulty:"easy"},{id:2,word:"house",difficulty:"easy"},{id:3,word:"beautiful",difficulty:"medium"},{id:4,word:"through",difficulty:"medium"},{id:5,word:"receive",difficulty:"medium"},{id:6,word:"necessary",difficulty:"hard"},{id:7,word:"business",difficulty:"hard"},{id:8,word:"environment",difficulty:"hard"}];function a(){let e=(0,s.useParams)();(0,s.useRouter)();let r=e.sessionId,[a,i]=(0,l.useState)(null),[o,d]=(0,l.useState)(0),[c,m]=(0,l.useState)({}),[x,u]=(0,l.useState)("active"),[h,g]=(0,l.useState)(""),[p,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{{let e=localStorage.getItem("student_".concat(r));e&&i(JSON.parse(e))}},[r]),(0,l.useEffect)(()=>{if("waiting"===x){let e=()=>{try{let e=localStorage.getItem("examinerCommand_".concat(r));if(e){let t=JSON.parse(e);"complete_test"===t.action&&(localStorage.removeItem("examinerCommand_".concat(r)),u("completed"))}}catch(e){console.error("Error polling for examiner commands:",e)}};e();let t=setInterval(e,1e3);return()=>clearInterval(t)}},[x,r]);let b=(0,l.useCallback)(()=>{{var e;let t=null==(e=n[o])?void 0:e.word;if(t&&"speechSynthesis"in window){f(!0);let e=new SpeechSynthesisUtterance(t);e.rate=.7,e.volume=.8,e.onend=()=>f(!1),speechSynthesis.speak(e)}}},[o]),w=e=>{let t={...c};t[o]={answer:e.trim(),correctWord:n[o].word,isComplete:e.trim().length>0},m(t);{let e={currentQuestion:o,answers:t,studentName:(null==a?void 0:a.firstName)||"Student",testType:"spelling"};localStorage.setItem("spellingTestState_".concat(r),JSON.stringify(e))}},y=(0,l.useCallback)(()=>{h.trim()&&w(h),o<n.length-1&&(d(o+1),g(""))},[o,h]),j=()=>{h.trim()&&w(h);let e=n.map((e,t)=>{let s=c[t]||{answer:"",correctWord:e.word},l=s.answer.toLowerCase()===e.word.toLowerCase();return{questionId:e.id,word:e.word,studentAnswer:s.answer,isCorrect:l,timestamp:new Date().toISOString()}});{localStorage.setItem("spellingTest_".concat(r),JSON.stringify(e));let t={testComplete:!0,currentSubtest:"spelling_complete",studentName:(null==a?void 0:a.firstName)||"Student"};localStorage.setItem("waitingState_".concat(r),JSON.stringify(t)),localStorage.setItem("test_completed_".concat(r),JSON.stringify({completed:!0,subtest:"spelling",timestamp:new Date().toISOString()}))}u("waiting")};return((0,l.useEffect)(()=>{let e=e=>{"Enter"===e.key&&"active"===x&&(e.preventDefault(),o===n.length-1?h.trim()&&j():h.trim()&&y())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[x,o,h,y]),(0,l.useEffect)(()=>{if("active"===x){let e=setTimeout(()=>{b()},500);return()=>clearTimeout(e)}},[o,x,b]),a)?"waiting"===x?(0,t.jsx)("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-stone-100 rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Please Wait"}),(0,t.jsx)("p",{className:"text-gray-600",children:"The next activity will begin soon."})]})}):"completed"===x?(0,t.jsx)("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-stone-100 rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Great Job!"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You completed the spelling test."})]})}):(n[o],(0,t.jsxs)("div",{className:"min-h-screen bg-blue-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Spelling Test"}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:a.firstName})]}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Word ",o+1," of ",n.length]})})]})})}),(0,t.jsx)("main",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"bg-stone-100 rounded-xl shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Spell the word you hear"}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("button",{onClick:b,disabled:p,className:"flex items-center space-x-3 px-8 py-4 rounded-xl font-medium text-lg mx-auto transition-all ".concat(p?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-6 h-6 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,t.jsx)("span",{children:"Playing..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 14.142M6.343 6.343A8.956 8.956 0 003 12a8.956 8.956 0 003.343 7.657l1.414-1.414A6.956 6.956 0 015 12c0-1.928.78-3.678 2.05-4.95l-1.414-1.414zm9.9 2.828a5 5 0 00-7.072 0L7.757 10.586A3 3 0 0012 15a3 3 0 004.243-4.414z"})}),(0,t.jsx)("span",{children:"ðŸ”Š Listen to the word"})]})})}),(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,t.jsx)("label",{htmlFor:"spelling-input",className:"block text-lg font-medium text-gray-700 mb-4",children:"Type the word:"}),(0,t.jsx)("input",{id:"spelling-input",type:"text",value:h,onChange:e=>{g(e.target.value)},placeholder:"Enter your spelling here...",className:"w-full px-4 py-4 text-xl text-center border-2 border-gray-300 rounded-xl focus:border-blue-900 focus:outline-none",autoFocus:!0}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-3",children:["Press ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-xs",children:"Enter"})," or click Next to continue"]})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex justify-between items-center",children:[(0,t.jsx)("button",{onClick:()=>{if(o>0){var e;d(o-1),g((null==(e=c[o-1])?void 0:e.answer)||"")}},disabled:0===o,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Word ",o+1," of ",n.length]}),o===n.length-1?(0,t.jsx)("button",{onClick:j,disabled:!h.trim(),className:"px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Finish Test"}):(0,t.jsx)("button",{onClick:y,disabled:!h.trim(),className:"px-6 py-3 bg-blue-900 text-white rounded-lg font-medium hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})):(0,t.jsx)("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-900 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})}}]);
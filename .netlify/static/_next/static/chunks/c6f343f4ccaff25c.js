(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14887,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),s=e.i(71645);function l(){let[e,l]=(0,s.useState)(null),[r,a]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/get-results"),t=await e.json(),s=[];if(t.success)s=t.results.map(e=>({sessionId:e.sessionId,name:e.name,isFiltered:e.isFiltered||!1,results:e.results}));else throw Error("Failed to fetch from API");for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);if(t&&t.startsWith("test_completed_"))try{let e=JSON.parse(localStorage.getItem(t)||"{}"),l=t.replace("test_completed_","");if(s.find(e=>e.sessionId===l))continue;let r=localStorage.getItem("student_".concat(l)),a=r?JSON.parse(r):null,c=localStorage.getItem("pattern_reasoning_test_".concat(l)),n=c?JSON.parse(c):[];if("pattern_reasoning"===e.testType||"pattern-reasoning"===e.subtest){let t={sessionId:l,name:(null==a?void 0:a.firstName)||e.studentName||"Unknown",isFiltered:e.isFiltered||!1,results:n};s.push(t)}}catch(e){console.error("Error parsing analytics data:",e)}}let r={};s.forEach(e=>{e.results.forEach(t=>{let s=t.questionId,l=t.ageGroup||"Unknown";r[s]||(r[s]={questionId:s,ageGroup:l,total:0,correct:0,totalFiltered:0,correctFiltered:0,totalFull:0,correctFull:0}),r[s].total+=1,t.isCorrect&&(r[s].correct+=1),e.isFiltered?(r[s].totalFiltered+=1,t.isCorrect&&(r[s].correctFiltered+=1)):(r[s].totalFull+=1,t.isCorrect&&(r[s].correctFull+=1))})});let a=Object.values(r).map(e=>({...e,percentage:e.total>0?Math.round(e.correct/e.total*100):0,percentageFiltered:e.totalFiltered>0?Math.round(e.correctFiltered/e.totalFiltered*100):0,percentageFull:e.totalFull>0?Math.round(e.correctFull/e.totalFull*100):0}));a.sort((e,t)=>e.questionId-t.questionId),l({questionStats:a,totalUsers:s.length,filteredUsers:s.filter(e=>e.isFiltered).length,fullTestUsers:s.filter(e=>!e.isFiltered).length})}catch(r){console.error("Error loading analytics:",r);let e={},t=[];for(let s=0;s<localStorage.length;s++){let l=localStorage.key(s);if(l&&l.startsWith("test_completed_"))try{let s=JSON.parse(localStorage.getItem(l)||"{}"),r=l.replace("test_completed_",""),a=localStorage.getItem("student_".concat(r)),c=a?JSON.parse(a):null,n=localStorage.getItem("pattern_reasoning_test_".concat(r)),i=n?JSON.parse(n):[];if("pattern_reasoning"===s.testType||"pattern-reasoning"===s.subtest){let l={sessionId:r,name:(null==c?void 0:c.firstName)||s.studentName||"Unknown",isFiltered:s.isFiltered||!1,results:i};t.push(l),i.forEach(t=>{let s=t.questionId,r=t.ageGroup||"Unknown";e[s]||(e[s]={questionId:s,ageGroup:r,total:0,correct:0,totalFiltered:0,correctFiltered:0,totalFull:0,correctFull:0}),e[s].total+=1,t.isCorrect&&(e[s].correct+=1),l.isFiltered?(e[s].totalFiltered+=1,t.isCorrect&&(e[s].correctFiltered+=1)):(e[s].totalFull+=1,t.isCorrect&&(e[s].correctFull+=1))})}}catch(e){console.error("Error parsing analytics data:",e)}}let s=Object.values(e).map(e=>({...e,percentage:e.total>0?Math.round(e.correct/e.total*100):0,percentageFiltered:e.totalFiltered>0?Math.round(e.correctFiltered/e.totalFiltered*100):0,percentageFull:e.totalFull>0?Math.round(e.correctFull/e.totalFull*100):0}));s.sort((e,t)=>e.questionId-t.questionId),l({questionStats:s,totalUsers:t.length,filteredUsers:t.filter(e=>e.isFiltered).length,fullTestUsers:t.filter(e=>!e.isFiltered).length})}a(!1)})()},[]),r)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-900 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):e&&0!==e.questionStats.length?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Pattern Reasoning Analytics"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Question-by-question performance analysis"})]}),(0,t.jsx)("button",{onClick:()=>{if(!e)return;let t=new Blob([["Question ID,Age Group,Total Attempts,Correct Answers,Success Rate (%),Ages 12+ Test Attempts,Ages 12+ Test Correct,Ages 12+ Test Success Rate (%),Full Test Attempts,Full Test Correct,Full Test Success Rate (%)",...e.questionStats.map(e=>[e.questionId,e.ageGroup,e.total,e.correct,e.percentage,e.totalFiltered,e.correctFiltered,e.percentageFiltered,e.totalFull,e.correctFull,e.percentageFull].join(","))].join("\\n")],{type:"text/csv"}),s=window.URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download="pattern-reasoning-analytics-".concat(new Date().toISOString().split("T")[0],".csv"),l.click(),window.URL.revokeObjectURL(s)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Export Analytics CSV"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:e.totalUsers}),(0,t.jsx)("div",{className:"text-sm text-blue-700",children:"Total Users"})]}),(0,t.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:e.filteredUsers}),(0,t.jsx)("div",{className:"text-sm text-purple-700",children:"Ages 12+ Test"})]}),(0,t.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-indigo-900",children:e.fullTestUsers}),(0,t.jsx)("div",{className:"text-sm text-indigo-700",children:"Full Test"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full table-auto",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age Group"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overall Success"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ages 12+ Test"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Full Test"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Difficulty"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.questionStats.map(e=>{var s;let l=(s=e.percentage)>=80?{text:"Easy",color:"text-green-600",bg:"bg-green-100"}:s>=60?{text:"Medium",color:"text-yellow-600",bg:"bg-yellow-100"}:s>=40?{text:"Hard",color:"text-orange-600",bg:"bg-orange-100"}:{text:"Very Hard",color:"text-red-600",bg:"bg-red-100"};return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"font-semibold text-gray-900",children:["Question ",e.questionId]})}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:e.ageGroup})}),(0,t.jsxs)("td",{className:"px-4 py-4 text-center",children:[(0,t.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[e.percentage,"%"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.correct,"/",e.total]})]}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:e.totalFiltered>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm font-semibold text-purple-900",children:[e.percentageFiltered,"%"]}),(0,t.jsxs)("div",{className:"text-xs text-purple-600",children:[e.correctFiltered,"/",e.totalFiltered]})]}):(0,t.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:e.totalFull>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm font-semibold text-indigo-900",children:[e.percentageFull,"%"]}),(0,t.jsxs)("div",{className:"text-xs text-indigo-600",children:[e.correctFull,"/",e.totalFull]})]}):(0,t.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(l.bg," ").concat(l.color),children:l.text})})]},e.questionId)})})]})}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Question Difficulty Distribution"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:["Easy (80%+)","Medium (60-79%)","Hard (40-59%)","Very Hard (<40%)"].map((s,l)=>{let[r,a]=[[80,100],[60,79],[40,59],[0,39]][l],c=e.questionStats.filter(e=>e.percentage>=r&&e.percentage<=a).length;return(0,t.jsxs)("div",{className:"rounded-lg p-4 text-center ".concat(["bg-green-100 text-green-800","bg-yellow-100 text-yellow-800","bg-orange-100 text-orange-800","bg-red-100 text-red-800"][l]),children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:c}),(0,t.jsx)("div",{className:"text-sm",children:s})]},s)})})]})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Data Available"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No test results found for analytics"})]})})}}]);